<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Spatial data in R | Elegant and informative maps with tmap</title>
  <meta name="description" content="This is a book in progress about the tmap package." />
  <meta name="generator" content="bookdown 0.20.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Spatial data in R | Elegant and informative maps with tmap" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book in progress about the tmap package." />
  <meta name="github-repo" content="mtennekes/tmap_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Spatial data in R | Elegant and informative maps with tmap" />
  
  <meta name="twitter:description" content="This is a book in progress about the tmap package." />
  

<meta name="author" content="Martijn Tennekes, Jakub Nowosad" />


<meta name="date" content="2020-06-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="nutshell.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<!-- a placeholder for a google analytics script -->
<script>
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">tmap: elegant and effective thematic maps in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute"><i class="fa fa-check"></i>How to contribute?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what-is-tmap"><i class="fa fa-check"></i><b>1.1</b> What is <strong>tmap</strong>?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#thematic-maps"><i class="fa fa-check"></i><b>1.2</b> Thematic maps</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="geodata.html"><a href="geodata.html"><i class="fa fa-check"></i><b>2</b> Spatial data in R</a><ul>
<li class="chapter" data-level="2.1" data-path="geodata.html"><a href="geodata.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="geodata.html"><a href="geodata.html#vector-data"><i class="fa fa-check"></i><b>2.2</b> Vector data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="geodata.html"><a href="geodata.html#vector-data-model"><i class="fa fa-check"></i><b>2.2.1</b> Vector data model</a></li>
<li class="chapter" data-level="2.2.2" data-path="geodata.html"><a href="geodata.html#the-sf-package"><i class="fa fa-check"></i><b>2.2.2</b> The sf package</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="geodata.html"><a href="geodata.html#raster-data"><i class="fa fa-check"></i><b>2.3</b> Raster data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="geodata.html"><a href="geodata.html#raster-data-model"><i class="fa fa-check"></i><b>2.3.1</b> Raster data model</a></li>
<li class="chapter" data-level="2.3.2" data-path="geodata.html"><a href="geodata.html#the-stars-package"><i class="fa fa-check"></i><b>2.3.2</b> The stars package</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="geodata.html"><a href="geodata.html#crs-tmp"><i class="fa fa-check"></i><b>2.4</b> CRS-tmp</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="nutshell.html"><a href="nutshell.html"><i class="fa fa-check"></i><b>3</b> <strong>tmap</strong> in a nutshell</a></li>
<li class="chapter" data-level="4" data-path="tmshape.html"><a href="tmshape.html"><i class="fa fa-check"></i><b>4</b> Specifying spatial data with <code>tm_shape</code></a><ul>
<li class="chapter" data-level="4.1" data-path="tmshape.html"><a href="tmshape.html#crs"><i class="fa fa-check"></i><b>4.1</b> Map projections (CRS)</a><ul>
<li class="chapter" data-level="4.1.1" data-path="tmshape.html"><a href="tmshape.html#how-to-put-an-orange-peel-flat-on-the-table"><i class="fa fa-check"></i><b>4.1.1</b> How to put an orange peel flat on the table?</a></li>
<li class="chapter" data-level="4.1.2" data-path="tmshape.html"><a href="tmshape.html#how-to-model-the-surface-of-the-earth"><i class="fa fa-check"></i><b>4.1.2</b> How to model the surface of the earth?</a></li>
<li class="chapter" data-level="4.1.3" data-path="tmshape.html"><a href="tmshape.html#platte-carrée-and-web-mercator"><i class="fa fa-check"></i><b>4.1.3</b> Platte Carrée and Web Mercator</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tmshape.html"><a href="tmshape.html#overview-of-map-projections"><i class="fa fa-check"></i><b>4.2</b> Overview of map projections</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="layers.html"><a href="layers.html"><i class="fa fa-check"></i><b>5</b> Layers</a></li>
<li class="chapter" data-level="6" data-path="othertypes.html"><a href="othertypes.html"><i class="fa fa-check"></i><b>6</b> Other types</a></li>
<li class="chapter" data-level="7" data-path="layout.html"><a href="layout.html"><i class="fa fa-check"></i><b>7</b> Layout</a></li>
<li class="chapter" data-level="8" data-path="interactive.html"><a href="interactive.html"><i class="fa fa-check"></i><b>8</b> Interactive settings</a></li>
<li class="chapter" data-level="9" data-path="multiples.html"><a href="multiples.html"><i class="fa fa-check"></i><b>9</b> Small multiples</a></li>
<li class="chapter" data-level="10" data-path="options.html"><a href="options.html"><i class="fa fa-check"></i><b>10</b> tmap options</a></li>
<li class="chapter" data-level="11" data-path="save.html"><a href="save.html"><i class="fa fa-check"></i><b>11</b> Save maps</a></li>
<li class="chapter" data-level="12" data-path="animations.html"><a href="animations.html"><i class="fa fa-check"></i><b>12</b> Animations</a></li>
<li class="chapter" data-level="13" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>13</b> <strong>tmap</strong> in <strong>shiny</strong></a></li>
<li class="chapter" data-level="14" data-path="goodmaps.html"><a href="goodmaps.html"><i class="fa fa-check"></i><b>14</b> How to make good maps?</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://mtennekes.github.io/">Martijn Tennekes</a></li>
<li><a href="https://nowosad.github.io/">Jakub Nowosad</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Elegant and informative maps with <strong>tmap</strong></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geodata" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Spatial data in R</h1>
<!-- # Geographic data in R {#geodata} -->
<!-- to discuss -->
<p></p>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">2.1</span> Introduction</h2>
<p>Vector and raster data models are two basic models used to represent spatial data.
These spatial data models are closely related to map making, with each model having its own pros and cons.
<!-- - few introduction sections -->
<!-- - mention GDAL, PROJ, and GEOS -->
<!-- - references to the next sections -->
<!-- - maybe also mention some data sources -->
This chapter describes the vector (section <a href="geodata.html#vector-data">2.2</a>) and raster (section <a href="geodata.html#raster-data">2.3</a>) models, and also their implementations in R in the form of the <strong>sf</strong> (section <a href="geodata.html#the-sf-package">2.2.2</a>) and <strong>stars</strong> (section <a href="geodata.html#the-stars-package">2.3.2</a>) packages.
Next, it focuses on the map projections (<a href="tmshape.html#crs">4.1</a>).
This section gives a background on why do we need map projections and how to translate spatial data from an ellipsoid into a flat surface or computer screen.
It also explains basic terms and gives an overview of map projections.
<!-- - maybe also references to some books (either here or in the next section or both) -->
<!-- geocompr, spatial data science, some crs book? -->
<!-- explain that often there is a need to prepare spatial data before mapping --></p>
</div>
<div id="vector-data" class="section level2">
<h2><span class="header-section-number">2.2</span> Vector data</h2>
<p></p>
<!-- - one/two intro sentences -->
<!-- - including r packages used for vector representation -->
<p>R has several packages aimed to represent spatial vector data.
Recently, the <strong>terra</strong> package has been released containing a new vector data representation.
For more than a decade, the <strong>sp</strong> package <!--REF--> was a standard of vector data representation in R.
However, now this package is in the maintenance mode only, and its successor, <strong>sf</strong> is recommended.
The <strong>tmap</strong> package has been using <strong>sf</strong> since version 2.0.
In the two next sections, we introduce vector data model (section <a href="geodata.html#vector-data-model">2.2.1</a>) and show how the <strong>sf</strong> package works with spatial data (section <a href="geodata.html#the-sf-package">2.2.2</a>).</p>
<div id="vector-data-model" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Vector data model</h3>
<p>…</p>
<p>


The vector data model consists of two main elements: geometries and attributes.</p>
<p>The role of geometry is to describe the location and shape of spatial objects.
There are three basic types of geometries: points, lines, and polygons.
All of them are build using the same main idea of coordinates.</p>
<p>A point is represented by a pair of coordinates, usually described as X and Y.
It allows for locating this point in some space.
<!-- short CRS intro -->
X and Y could be unitless, in degrees, or in some measure units, such as meters.
<!-- maybe ref to CRS section here -->
Points can represent features on different scales, from a GPS position, location of a bench in a park, to a city on a small scale map.
They are also used to express abstract features, such as locations of map labels.
Properties of points<!--,such as ...--> can be expressed on maps by different point sizes, colors, or shapes<!--(markers/images) -->.</p>
<p>A line extends the idea of a point.
It consists of several points (with coordinates)<!--vertex--> that are arranged in some order.
Consecutive points are connected by straight lines.
Therefore, a straight spatial line consists of two points (two pairs of coordinates), while complex spatial lines could be created based on a large number of points.<!--to rewrite-->
It gives the illusion that the line is curved.
Lines are used to representing linear features, such as roads, rivers, boundaries, footpaths, etc.
In this case, we can express line features’ attributes using either lines’ color or their widths.
<!-- ways to adjust lines aesthetics: colors, lwd (line width) -->
<!-- in theory lty could be also used - but it is not implemented in tmap --></p>
<p>A polygon is again a set of ordered points connected by straight lines.
Its only difference from the line is that the first and the last point in a polygon has the same coordinates, and thus close the object.
<!-- examples of polygons -->
The polygon representation is used to represent shapes and locations of different objects, from a lake or a patch of vegetation, through a building or a city block, to some administrative units.
Polygons also have one unique feature - they could have holes.
A polygon hole represents an area inside of the polygon but does not belong to it.
For example, a lake with an island can be depicted as a polygon with a hole.
The values of polygons’ attributes can be represented by the areas (fill) colors.</p>
<p>The second part of the vector data model relates to attributes.
Attributes are usually stored as a table describing the properties of the data.
In this table, each column depicts some property, such as an identification number, a name of a feature, or a value of some characteristic.
Each row, on the other hand, relates to a single geometry.</p>
<p><img src="02-geodata_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>
The above ideas could be implemented in many ways. <!--...-->
Currently, the Simple Feature Access seems to be the most widely used standard <!--architecture-->
<!-- REF -->
<!-- http://portal.opengeospatial.org/files/?artifact_id=25355 -->
In it, a feature is every object or concept that have spatial location or extent.
Simple feature standard makes a clear distinction between single- and multi-element features.
We can have a POINT feature and a MULTIPOINT feature, and similarly LINESTRING and MULTILINESTRING, and POLYGON and MULTIPOLYGON.
The main difference between single element features (such as POINT or POLYGON) and multi-element features (such as MULTIPOINT or MULTIPOLYGON) can be clearly seen in attribute tables.
For example, six points stored as POINT features will have six separate rows, while six points stored as just one MULTIPOINT feature will have one row.
<!-- redundancy -->
<!-- Example -->
The simple feature standard also describes a number of additional geometry types, including Curve, Surface, or Triangle.
Finally, GeometryCollection exists that contain all of the possible geometry types.</p>
<!-- JN: maybe too much information-->
<!-- simple features standard also defines possible topological rules -->
<!-- additional dimensions: -->
<!-- - more than two coordinates (XYZM) -->
<!-- - multiobjects -->
<!-- - additional geometries -->
<!-- - what is the vector data model (point coordinates) -->
<!-- - examples -->
<!-- - what's the simple features standard -->
<!-- - main geometry types -->
<!-- - relation between geometries and attributes -->
<p>
There are a couple hundreds of file formats that can store spatial vector data.
One of the simplest ways to store spatial data is in the form of a text file (<code>.csv</code>) or as a spreadsheet (<code>.xls</code> or <code>.xlsx</code>).
While it makes storing point data simple, with two columns representing coordinates, it is not easy to store more complex objects in this way.
Text files are also not suitable for storing information about the coordinate reference system used.
<!--ref to the CRS section??-->
Historically, the shapefile format (<code>.shp</code>) developed by the ESRI company gained a lot of interest and become the most widely supported spatial vector file format.
Despite its popularity, this format has a number of shortcomings, including the need to store several files, attribute names limited to ten characters, the ability to store up to 255 attributes and files up to 2GB, and many more.
A fairly recent file format, OGC GeoPackage (<code>.gpkg</code>), was developed as an alternative.
It is a single file database free from the limitation of the shapefile format.
Other popular spatial vector file formats include GeoJSON (<code>.geojson</code>), GPX (<code>.gpx</code>), and KML (<code>.kml</code>).
<!-- FlatGeobuf?? -->
<!-- - advantages/disadvantages -->
<!-- - example figure (similar to the one in geocompr, but made with tmap) --></p>
</div>
<div id="the-sf-package" class="section level3">
<h3><span class="header-section-number">2.2.2</span> The sf package</h3>
<p>
</p>
<p>The <strong>sf</strong> package implements ideas behind the Simple Feature standard.
Its main class, <code>sf</code>, has the form of an extended data frame, where each row is a spatial feature.
<!-- - how the sf objects are organized -->
In it, attributes of the vector data are stored as columns.
It also has one additional column, most often named <code>geom</code> or <code>geometry</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.
This column contains geometries in a form of well-known text (WKT), storing all of the coordinates.</p>
<!-- - how to read sf objects from files -->
<p>The <strong>sf</strong> package can read all of the spatial data formats mentioned in the previous section using the <code>read_sf()</code> function<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.
<!--improve example--></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="geodata.html#cb1-1"></a><span class="co"># replace this data with some new tmap dataset</span></span>
<span id="cb1-2"><a href="geodata.html#cb1-2"></a><span class="kw">library</span>(sf)</span>
<span id="cb1-3"><a href="geodata.html#cb1-3"></a>file_path =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;shapes/world.gpkg&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spData&quot;</span>)</span>
<span id="cb1-4"><a href="geodata.html#cb1-4"></a>x =<span class="st"> </span><span class="kw">read_sf</span>(file_path)</span></code></pre></div>
<!-- explain example -->
<p>The new object, <code>x</code>, has a <code>sf</code> class.
It has 177 features (rows or geometries) and 10 fields (columns with attributes).
There is also an 11th column, <code>geom</code>, that stores geometries of each feature.
Objects of class <code>sf</code> also display a header containing spatial metadata.
It includes geometry type, dimension (<code>XY</code>, <code>XYZ</code>, <code>XYM</code>, <code>XYZM</code>), bounding box (<code>bbox</code>), and information about the used Coordinate Reference System (<code>CRS</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="geodata.html#cb2-1"></a>x</span>
<span id="cb2-2"><a href="geodata.html#cb2-2"></a><span class="co">#&gt; Simple feature collection with 177 features and 10 fields</span></span>
<span id="cb2-3"><a href="geodata.html#cb2-3"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb2-4"><a href="geodata.html#cb2-4"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb2-5"><a href="geodata.html#cb2-5"></a><span class="co">#&gt; bbox:           xmin: -180 ymin: -90 xmax: 180 ymax: 83.6</span></span>
<span id="cb2-6"><a href="geodata.html#cb2-6"></a><span class="co">#&gt; geographic CRS: WGS 84</span></span>
<span id="cb2-7"><a href="geodata.html#cb2-7"></a><span class="co">#&gt; [90m# A tibble: 177 x 11[39m</span></span>
<span id="cb2-8"><a href="geodata.html#cb2-8"></a><span class="co">#&gt;    iso_a2 name_long continent region_un subregion type </span></span>
<span id="cb2-9"><a href="geodata.html#cb2-9"></a><span class="co">#&gt;    [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m     [3m[90m&lt;chr&gt;[39m[23m     [3m[90m&lt;chr&gt;[39m[23m     [3m[90m&lt;chr&gt;[39m[23m     [3m[90m&lt;chr&gt;[39m[23m</span></span>
<span id="cb2-10"><a href="geodata.html#cb2-10"></a><span class="co">#&gt; [90m 1[39m FJ     Fiji      Oceania   Oceania   Melanesia Sove…</span></span>
<span id="cb2-11"><a href="geodata.html#cb2-11"></a><span class="co">#&gt; [90m 2[39m TZ     Tanzania  Africa    Africa    Eastern … Sove…</span></span>
<span id="cb2-12"><a href="geodata.html#cb2-12"></a><span class="co">#&gt; [90m 3[39m EH     Western … Africa    Africa    Northern… Inde…</span></span>
<span id="cb2-13"><a href="geodata.html#cb2-13"></a><span class="co">#&gt; [90m 4[39m CA     Canada    North Am… Americas  Northern… Sove…</span></span>
<span id="cb2-14"><a href="geodata.html#cb2-14"></a><span class="co">#&gt; [90m 5[39m US     United S… North Am… Americas  Northern… Coun…</span></span>
<span id="cb2-15"><a href="geodata.html#cb2-15"></a><span class="co">#&gt; [90m 6[39m KZ     Kazakhst… Asia      Asia      Central … Sove…</span></span>
<span id="cb2-16"><a href="geodata.html#cb2-16"></a><span class="co">#&gt; [90m 7[39m UZ     Uzbekist… Asia      Asia      Central … Sove…</span></span>
<span id="cb2-17"><a href="geodata.html#cb2-17"></a><span class="co">#&gt; [90m 8[39m PG     Papua Ne… Oceania   Oceania   Melanesia Sove…</span></span>
<span id="cb2-18"><a href="geodata.html#cb2-18"></a><span class="co">#&gt; [90m 9[39m ID     Indonesia Asia      Asia      South-Ea… Sove…</span></span>
<span id="cb2-19"><a href="geodata.html#cb2-19"></a><span class="co">#&gt; [90m10[39m AR     Argentina South Am… Americas  South Am… Sove…</span></span>
<span id="cb2-20"><a href="geodata.html#cb2-20"></a><span class="co">#&gt; [90m# … with 167 more rows, and 5 more variables:[39m</span></span>
<span id="cb2-21"><a href="geodata.html#cb2-21"></a><span class="co">#&gt; [90m#   area_km2 [3m[90m&lt;dbl&gt;[90m[23m, pop [3m[90m&lt;dbl&gt;[90m[23m, lifeExp [3m[90m&lt;dbl&gt;[90m[23m,[39m</span></span>
<span id="cb2-22"><a href="geodata.html#cb2-22"></a><span class="co">#&gt; [90m#   gdpPercap [3m[90m&lt;dbl&gt;[90m[23m, geom [3m[90m&lt;MULTIPOLYGON [°]&gt;[90m[23m[39m</span></span></code></pre></div>
<p>The <code>x</code> object has MULTIPOLYGON geometry type, where each feature (row) can consist of one or more polygons.
Each polygon’s vertices are represented by a pair of values (<code>dimension: XY</code>).
Bounding box allows to quickly understand the spatial extension of the input data.
<!--...-->
Finally, it has geographic CRS named WGS 84.
You can learn more about Coordinate Reference Systems in section <a href="tmshape.html#crs">4.1</a>.</p>
<!-- ref to CRS section -->
<p>Spatial vector data of class <code>sf</code> can be also obtained using some of other R data packages.
<!-- add REFs-->
For example, <strong>rnaturalearth</strong> allows to download world map data, <strong>osmdata</strong> imports OpenStreetMap data as <code>sf</code> objects, and <strong>tigris</strong> loads TIGER/Line data.
<!-- add reference to geocompr -->
<!-- add reference to https://cran.r-project.org/web/views/Spatial.html (after my updates) --></p>
<p>The <strong>tmap</strong> package accepts spatial vector data objects from both <strong>sf</strong> and <strong>sp</strong> packages.
In case of having vector objects in a different representation, they should be converted into <code>sf</code> objects first, before making maps.
The <strong>sf</strong> package has the <code>st_as_sf()</code> function that translates objects of many classes, including <code>Spatial</code> (from the <strong>sp</strong> package), <code>ppp</code>, <code>psp</code>, and <code>lpp</code> (from the <strong>spatstat</strong> package), to the objects of class <code>sf</code>.
The <code>st_as_sf()</code> function also allows to turn data frames into <code>sf</code> objects - the user need to provide the input data frame, names of columns with coordinates, and additionally definition of the CRS of the data.
For example <code>my_sf = st_as_sf(my_df, coords = c("Xcolumn", "Ycolumn"), crs = 4326)</code>.</p>
<!-- - where to find info on how to operate on sf objects -->
<!-- - https://geocompr.github.io/ -->
<!-- - vector simplification? -->
</div>
</div>
<div id="raster-data" class="section level2">
<h2><span class="header-section-number">2.3</span> Raster data</h2>
<p></p>
<!-- - one/two intro sentences -->
<!-- - including r packages used for raster representation -->
<!-- packages REFs -->
<p>Several R packages can be used to represent spatial raster data, including <strong>raster</strong> and its successor <strong>terra</strong>.
The <strong>raster</strong> package was used as a backbone of raster data visualization until <strong>tmap</strong> version 3.0.
In the two next sections, we present raster data model (section <a href="geodata.html#raster-data-model">2.3.1</a>)
and introduce the <strong>stars</strong> package (section <a href="geodata.html#the-stars-package">2.3.2</a>).</p>
<div id="raster-data-model" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Raster data model</h3>
<p>
<!-- - raster data model (grid) -->
The raster data model represents the world using a continuous grid of cells<!--pixels-->.
<!-- - contionous and categorical rasters -->
Each cell has an associated value</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="geodata.html#cb3-1"></a><span class="co">#replace example later</span></span>
<span id="cb3-2"><a href="geodata.html#cb3-2"></a><span class="kw">library</span>(tmap)</span>
<span id="cb3-3"><a href="geodata.html#cb3-3"></a><span class="kw">library</span>(spData)</span>
<span id="cb3-4"><a href="geodata.html#cb3-4"></a><span class="co">#&gt; To access larger datasets in this package,</span></span>
<span id="cb3-5"><a href="geodata.html#cb3-5"></a><span class="co">#&gt; install the spDataLarge package with:</span></span>
<span id="cb3-6"><a href="geodata.html#cb3-6"></a><span class="co">#&gt; `install.packages(&#39;spDataLarge&#39;,</span></span>
<span id="cb3-7"><a href="geodata.html#cb3-7"></a><span class="co">#&gt; repos=&#39;https://nowosad.github.io/drat/&#39;,</span></span>
<span id="cb3-8"><a href="geodata.html#cb3-8"></a><span class="co">#&gt; type=&#39;source&#39;)`</span></span>
<span id="cb3-9"><a href="geodata.html#cb3-9"></a><span class="kw">library</span>(stars)</span>
<span id="cb3-10"><a href="geodata.html#cb3-10"></a><span class="co">#&gt; Loading required package: abind</span></span>
<span id="cb3-11"><a href="geodata.html#cb3-11"></a><span class="kw">set.seed</span>(<span class="dv">2020-06-25</span>)</span>
<span id="cb3-12"><a href="geodata.html#cb3-12"></a>mat =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb3-13"><a href="geodata.html#cb3-13"></a><span class="kw">dim</span>(mat) =<span class="st"> </span><span class="kw">c</span>(<span class="dt">x =</span> <span class="dv">5</span>, <span class="dt">y =</span> <span class="dv">4</span>)</span>
<span id="cb3-14"><a href="geodata.html#cb3-14"></a>sta =<span class="st"> </span><span class="kw">st_as_stars</span>(mat)</span>
<span id="cb3-15"><a href="geodata.html#cb3-15"></a><span class="kw">attr</span>(sta, <span class="st">&quot;dimensions&quot;</span>)[[<span class="dv">2</span>]]<span class="op">$</span>delta =<span class="st"> </span><span class="dv">-1</span></span>
<span id="cb3-16"><a href="geodata.html#cb3-16"></a></span>
<span id="cb3-17"><a href="geodata.html#cb3-17"></a>sta_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(sta)</span>
<span id="cb3-18"><a href="geodata.html#cb3-18"></a>sta_sf<span class="op">$</span>values =<span class="st"> </span><span class="kw">sample.int</span>(<span class="dv">100</span>, <span class="dv">20</span>)</span>
<span id="cb3-19"><a href="geodata.html#cb3-19"></a>sta_sf<span class="op">$</span>values[<span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">17</span>)] =<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb3-20"><a href="geodata.html#cb3-20"></a></span>
<span id="cb3-21"><a href="geodata.html#cb3-21"></a><span class="kw">tm_shape</span>(sta_sf) <span class="op">+</span></span>
<span id="cb3-22"><a href="geodata.html#cb3-22"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb3-23"><a href="geodata.html#cb3-23"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;A1&quot;</span>) <span class="op">+</span></span>
<span id="cb3-24"><a href="geodata.html#cb3-24"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>)</span>
<span id="cb3-25"><a href="geodata.html#cb3-25"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sf unknown.</span></span>
<span id="cb3-26"><a href="geodata.html#cb3-26"></a><span class="co">#&gt; Long-lat (WGS84) is assumed.</span></span>
<span id="cb3-27"><a href="geodata.html#cb3-27"></a></span>
<span id="cb3-28"><a href="geodata.html#cb3-28"></a><span class="kw">tm_shape</span>(sta_sf) <span class="op">+</span></span>
<span id="cb3-29"><a href="geodata.html#cb3-29"></a><span class="st">  </span><span class="kw">tm_polygons</span>(<span class="st">&quot;values&quot;</span>) <span class="op">+</span></span>
<span id="cb3-30"><a href="geodata.html#cb3-30"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;values&quot;</span>) <span class="op">+</span></span>
<span id="cb3-31"><a href="geodata.html#cb3-31"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">legend.show =</span> <span class="ot">FALSE</span>)</span>
<span id="cb3-32"><a href="geodata.html#cb3-32"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sf unknown.</span></span>
<span id="cb3-33"><a href="geodata.html#cb3-33"></a><span class="co">#&gt; Long-lat (WGS84) is assumed.</span></span></code></pre></div>
<p><img src="02-geodata_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /><img src="02-geodata_files/figure-html/unnamed-chunk-9-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="geodata.html#cb4-1"></a><span class="co"># regular grid </span></span>
<span id="cb4-2"><a href="geodata.html#cb4-2"></a>tm_sta_regular =<span class="st"> </span><span class="kw">tm_shape</span>(sta_sf) <span class="op">+</span></span>
<span id="cb4-3"><a href="geodata.html#cb4-3"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb4-4"><a href="geodata.html#cb4-4"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;A1&quot;</span>) <span class="op">+</span></span>
<span id="cb4-5"><a href="geodata.html#cb4-5"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">main.title =</span> <span class="st">&quot;Regular&quot;</span>)</span>
<span id="cb4-6"><a href="geodata.html#cb4-6"></a><span class="co"># rotated grids </span></span>
<span id="cb4-7"><a href="geodata.html#cb4-7"></a>sta_rotated =<span class="st"> </span>sta</span>
<span id="cb4-8"><a href="geodata.html#cb4-8"></a><span class="kw">attr</span>(<span class="kw">attr</span>(sta_rotated, <span class="st">&quot;dimensions&quot;</span>), <span class="st">&quot;raster&quot;</span>)<span class="op">$</span>affine =<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>)</span>
<span id="cb4-9"><a href="geodata.html#cb4-9"></a>sta_rotated_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(sta_rotated)</span>
<span id="cb4-10"><a href="geodata.html#cb4-10"></a>tm_sta_rotated =<span class="st"> </span><span class="kw">tm_shape</span>(sta_rotated_sf) <span class="op">+</span></span>
<span id="cb4-11"><a href="geodata.html#cb4-11"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb4-12"><a href="geodata.html#cb4-12"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;A1&quot;</span>) <span class="op">+</span></span>
<span id="cb4-13"><a href="geodata.html#cb4-13"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">main.title =</span> <span class="st">&quot;Rotated&quot;</span>)</span>
<span id="cb4-14"><a href="geodata.html#cb4-14"></a><span class="co"># sheared grids</span></span>
<span id="cb4-15"><a href="geodata.html#cb4-15"></a>sta_sheared =<span class="st"> </span>sta</span>
<span id="cb4-16"><a href="geodata.html#cb4-16"></a><span class="kw">attr</span>(<span class="kw">attr</span>(sta_sheared, <span class="st">&quot;dimensions&quot;</span>), <span class="st">&quot;raster&quot;</span>)<span class="op">$</span>affine =<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>)</span>
<span id="cb4-17"><a href="geodata.html#cb4-17"></a>sta_sheared_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(sta_sheared)</span>
<span id="cb4-18"><a href="geodata.html#cb4-18"></a>tm_sta_sheared =<span class="st"> </span><span class="kw">tm_shape</span>(sta_sheared_sf) <span class="op">+</span></span>
<span id="cb4-19"><a href="geodata.html#cb4-19"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb4-20"><a href="geodata.html#cb4-20"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;A1&quot;</span>) <span class="op">+</span></span>
<span id="cb4-21"><a href="geodata.html#cb4-21"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">main.title =</span> <span class="st">&quot;Sheared&quot;</span>)</span>
<span id="cb4-22"><a href="geodata.html#cb4-22"></a><span class="co"># rectilinear grids</span></span>
<span id="cb4-23"><a href="geodata.html#cb4-23"></a>x =<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">2.1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb4-24"><a href="geodata.html#cb4-24"></a>y =<span class="st"> </span><span class="kw">rev</span>(<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb4-25"><a href="geodata.html#cb4-25"></a>sta_rectilinear =<span class="st"> </span><span class="kw">st_as_stars</span>(<span class="kw">list</span>(<span class="dt">m =</span> mat), </span>
<span id="cb4-26"><a href="geodata.html#cb4-26"></a>                              <span class="dt">dimensions =</span> <span class="kw">st_dimensions</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y))</span>
<span id="cb4-27"><a href="geodata.html#cb4-27"></a>sta_rectilinear_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(sta_rectilinear)</span>
<span id="cb4-28"><a href="geodata.html#cb4-28"></a>tm_sta_rectilinear =<span class="st"> </span><span class="kw">tm_shape</span>(sta_rectilinear_sf) <span class="op">+</span></span>
<span id="cb4-29"><a href="geodata.html#cb4-29"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb4-30"><a href="geodata.html#cb4-30"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;m&quot;</span>) <span class="op">+</span></span>
<span id="cb4-31"><a href="geodata.html#cb4-31"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">main.title =</span> <span class="st">&quot;Rectilinear&quot;</span>)</span>
<span id="cb4-32"><a href="geodata.html#cb4-32"></a><span class="co"># curvilinear grids</span></span>
<span id="cb4-33"><a href="geodata.html#cb4-33"></a>sta_curvilinear =<span class="st"> </span>sta</span>
<span id="cb4-34"><a href="geodata.html#cb4-34"></a>X1 =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">times =</span> <span class="dv">4</span>), <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb4-35"><a href="geodata.html#cb4-35"></a>X2 =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="kw">seq</span>(<span class="fl">3.36</span>, <span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">4</span>),</span>
<span id="cb4-36"><a href="geodata.html#cb4-36"></a>                    <span class="kw">seq</span>(<span class="fl">3.52</span>, <span class="fl">1.16</span>, <span class="dt">length.out =</span> <span class="dv">4</span>),</span>
<span id="cb4-37"><a href="geodata.html#cb4-37"></a>                    <span class="kw">seq</span>(<span class="fl">3.68</span>, <span class="fl">1.32</span>, <span class="dt">length.out =</span> <span class="dv">4</span>),</span>
<span id="cb4-38"><a href="geodata.html#cb4-38"></a>                    <span class="kw">seq</span>(<span class="fl">3.68</span>, <span class="fl">1.32</span>, <span class="dt">length.out =</span> <span class="dv">4</span>),</span>
<span id="cb4-39"><a href="geodata.html#cb4-39"></a>                    <span class="kw">seq</span>(<span class="fl">3.68</span>, <span class="fl">1.32</span>, <span class="dt">length.out =</span> <span class="dv">4</span>)),</span>
<span id="cb4-40"><a href="geodata.html#cb4-40"></a>                  <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb4-41"><a href="geodata.html#cb4-41"></a>                  <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</span>
<span id="cb4-42"><a href="geodata.html#cb4-42"></a>am =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb4-43"><a href="geodata.html#cb4-43"></a>sta_curvilinear =<span class="st"> </span><span class="kw">st_as_stars</span>(am)</span>
<span id="cb4-44"><a href="geodata.html#cb4-44"></a>sta_curvilinear =<span class="st"> </span><span class="kw">st_as_stars</span>(sta_curvilinear,</span>
<span id="cb4-45"><a href="geodata.html#cb4-45"></a>                              <span class="dt">curvilinear =</span> <span class="kw">list</span>(<span class="dt">X1 =</span> X1,</span>
<span id="cb4-46"><a href="geodata.html#cb4-46"></a>                                                 <span class="dt">X2 =</span> X2))</span>
<span id="cb4-47"><a href="geodata.html#cb4-47"></a>sta_curvilinear_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(sta_curvilinear)</span>
<span id="cb4-48"><a href="geodata.html#cb4-48"></a>tm_sta_curvilinear =<span class="st"> </span><span class="kw">tm_shape</span>(sta_curvilinear_sf) <span class="op">+</span></span>
<span id="cb4-49"><a href="geodata.html#cb4-49"></a><span class="st">  </span><span class="kw">tm_polygons</span>() <span class="op">+</span></span>
<span id="cb4-50"><a href="geodata.html#cb4-50"></a><span class="st">  </span><span class="kw">tm_text</span>(<span class="st">&quot;A1&quot;</span>) <span class="op">+</span></span>
<span id="cb4-51"><a href="geodata.html#cb4-51"></a><span class="st">  </span><span class="co"># tm_grid() +</span></span>
<span id="cb4-52"><a href="geodata.html#cb4-52"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> <span class="ot">FALSE</span>, <span class="dt">main.title =</span> <span class="st">&quot;Curvilinear&quot;</span>)</span>
<span id="cb4-53"><a href="geodata.html#cb4-53"></a><span class="co"># all</span></span>
<span id="cb4-54"><a href="geodata.html#cb4-54"></a>tm_sta_all =<span class="st"> </span><span class="kw">tmap_arrange</span>(tm_sta_regular, tm_sta_rotated, tm_sta_sheared,</span>
<span id="cb4-55"><a href="geodata.html#cb4-55"></a>                          tm_sta_rectilinear, tm_sta_curvilinear)</span>
<span id="cb4-56"><a href="geodata.html#cb4-56"></a>tm_sta_all</span>
<span id="cb4-57"><a href="geodata.html#cb4-57"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sf unknown.</span></span>
<span id="cb4-58"><a href="geodata.html#cb4-58"></a><span class="co">#&gt; Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-59"><a href="geodata.html#cb4-59"></a><span class="co">#&gt; Warning: Currect projection of shape sta_rotated_sf</span></span>
<span id="cb4-60"><a href="geodata.html#cb4-60"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-61"><a href="geodata.html#cb4-61"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sheared_sf</span></span>
<span id="cb4-62"><a href="geodata.html#cb4-62"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-63"><a href="geodata.html#cb4-63"></a><span class="co">#&gt; Warning: Currect projection of shape sta_rectilinear_sf</span></span>
<span id="cb4-64"><a href="geodata.html#cb4-64"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-65"><a href="geodata.html#cb4-65"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sf unknown.</span></span>
<span id="cb4-66"><a href="geodata.html#cb4-66"></a><span class="co">#&gt; Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-67"><a href="geodata.html#cb4-67"></a><span class="co">#&gt; Warning: Currect projection of shape sta_rotated_sf</span></span>
<span id="cb4-68"><a href="geodata.html#cb4-68"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-69"><a href="geodata.html#cb4-69"></a><span class="co">#&gt; Warning: Currect projection of shape sta_sheared_sf</span></span>
<span id="cb4-70"><a href="geodata.html#cb4-70"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span>
<span id="cb4-71"><a href="geodata.html#cb4-71"></a><span class="co">#&gt; Warning: Currect projection of shape sta_rectilinear_sf</span></span>
<span id="cb4-72"><a href="geodata.html#cb4-72"></a><span class="co">#&gt; unknown. Long-lat (WGS84) is assumed.</span></span></code></pre></div>
<p><img src="02-geodata_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;" /></p>
<!-- - examples -->
<!-- - single layer rasters vs multilayer rasters -->
<!-- - storing bands vs attributes (either here or in the next section) (data cubes) -->
<!-- - rbg rasters -->
<!-- - regular, rotated, sheared, rectilinear and curvilinear rasters -->
<!-- - raster file formats -->
</div>
<div id="the-stars-package" class="section level3">
<h3><span class="header-section-number">2.3.2</span> The stars package</h3>
<p>
</p>
<!-- - how the stars objects are organized -->
<!-- - how to read stars objects from files -->
<!-- - including reading chunks, changing resolution, and selecting bands -->
<!-- - where to find info on how to operate on stars objects -->
<!-- - https://r-spatial.github.io/stars/index.html -->
<!-- - advice: sometimes/often it is better to prepare spatial object before the mapping, than trying to over-customize the map -->
<!-- data cubes!! -->
<!-- - stars proxy -->
</div>
</div>
<div id="crs-tmp" class="section level2">
<h2><span class="header-section-number">2.4</span> CRS-tmp</h2>
<!-- mtennekes part -->
<!-- + how to transform CRSs -->

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>However, any other names are also possible.<a href="geodata.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>It is also possible to read spatial vector data using the <code>st_read()</code> function, which differs from <code>read_sf()</code> by having different default arguments.<a href="geodata.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>
/*
Sorts the references alphabetically.
Modified from code by Yvonne Aburrow.
*/
$(function(){
    var elems = $('#refs').children('div').remove();
    elems.sort(function (a, b) {
        return $(b).children('p').html().toUpperCase() > $(a).children('p').html().toUpperCase() ? -1 : 1;
    });
    $('#refs').append(elems);
})
</script>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="nutshell.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mtennekes/tmap_book/edit/master/02-geodata.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
